<%- include('partials/header') %>

<!-- Main Content -->
<main class="main-content">
    <!-- Hero Search Section -->
    <section class="hero-section">
        <div class="hero-container">
            <h1 class="hero-title">
                <i class="fas fa-search"></i>
                Explore Countries Worldwide
            </h1>
            <p class="hero-subtitle">
                Discover detailed information about any country by searching with name, capital, or region
            </p>
            
            <!-- Error Message -->
            <% if (error) { %>
                <div class="error-alert">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span><%= error %></span>
                </div>
            <% } %>
            
            <!-- Search Form -->
            <form action="/search" method="POST" class="search-form">
                <div class="search-inputs-row">
                    <div class="input-group">
                        <i class="fas fa-flag input-icon"></i>
                        <input type="text" name="countrySearch" placeholder="Search by Country Name" class="search-input">
                    </div>
                    <div class="input-group">
                        <i class="fas fa-city input-icon"></i>
                        <input type="text" name="capitalSearch" placeholder="Search by Capital City" class="search-input">
                    </div>
                    <div class="input-group">
                        <i class="fas fa-globe input-icon"></i>
                        <input type="text" name="regionSearch" placeholder="Search by Region" class="search-input">
                    </div>
                </div>
                
                <button type="submit" class="search-btn">
                    <i class="fas fa-search"></i>
                    <span>Search Countries</span>
                </button>
            </form>
        </div>
    </section>

    <!-- Results Section -->
    <% if (searchPerformed && countries.length > 0) { %>
    <section class="results-section">
        <div class="results-header">
            <h2>Search Results (<%= countries.length %> <%= countries.length === 1 ? 'country' : 'countries' %> found)</h2>
        </div>
        
        <div class="countries-grid">
            <% countries.forEach(country => { %>
                <div class="country-card" onclick="openCountryModal('<%= country.name %>')">
                    <div class="card-flag">
                        <% if (country.flag) { %>
                            <img src="<%= country.flag %>" alt="<%= country.name %> Flag" class="flag-image">
                        <% } else { %>
                            <div class="flag-placeholder">
                                <i class="fas fa-flag"></i>
                            </div>
                        <% } %>
                    </div>
                    
                    <div class="card-content">
                        <h3 class="card-title"><%= country.name %></h3>
                        <p class="card-region">
                            <i class="fas fa-map-marker-alt"></i>
                            <%= country.region %>
                        </p>
                        <div class="card-hover-text">
                            <i class="fas fa-eye"></i>
                            Click to view details
                        </div>
                    </div>
                </div>
            <% }); %>
        </div>
    </section>
    <% } %>
    
    <!-- No Results Message -->
    <% if (searchPerformed && countries.length === 0 && !error) { %>
    <section class="no-results">
        <div class="no-results-content">
            <i class="fas fa-search"></i>
            <h3>No countries found</h3>
            <p>Try adjusting your search terms or check your spelling.</p>
        </div>
    </section>
    <% } %>
</main>

<%- include('partials/footer') %>
